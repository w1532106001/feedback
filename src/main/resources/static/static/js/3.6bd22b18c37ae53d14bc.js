webpackJsonp([3],{i4S5:function(t,s){},iPOO:function(t,s){var e,a="ontouchstart"in window;document.createTouch||(document.createTouch=function(t,s,e,a,i,o,r){return new n(s,e,{pageX:a,pageY:i,screenX:o,screenY:r,clientX:a-window.pageXOffset,clientY:i-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var t=i(),s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length=arguments.length,t});var n=function(t,s,e,a,n){a=a||0,n=n||0,this.identifier=s,this.target=t,this.clientX=e.clientX+a,this.clientY=e.clientY+n,this.screenX=e.screenX+a,this.screenY=e.screenY+n,this.pageX=e.pageX+a,this.pageY=e.pageY+n};function i(){var t=[];return t.item=function(t){return this[t]||null},t.identifiedTouch=function(t){return this[t+1]||null},t}var o=!1;function r(t){return function(s){var a,n,i;("mousedown"===s.type&&(o=!0),"mouseup"===s.type&&(o=!1),"mousemove"!==s.type||o)&&(("mousedown"===s.type||!e||e&&!e.dispatchEvent)&&(e=s.target),a=t,n=s,(i=document.createEvent("Event")).initEvent(a,!0,!0),i.altKey=n.altKey,i.ctrlKey=n.ctrlKey,i.metaKey=n.metaKey,i.shiftKey=n.shiftKey,i.touches=v(n),i.targetTouches=v(n),i.changedTouches=l(n),e.dispatchEvent(i),"mouseup"===s.type&&(e=null))}}function l(t){var s=i();return s.push(new n(e,1,t,0,0)),s}function v(t){return"mouseup"===t.type?i():l(t)}function c(){window.addEventListener("mousedown",r("touchstart"),!0),window.addEventListener("mousemove",r("touchmove"),!0),window.addEventListener("mouseup",r("touchend"),!0)}c.multiTouchOffset=75,a||new c},s0Nv:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("iPOO");var a={components:{Header:e("uW9E").a},data:function(){return{floatingButtonHide:!0,issueId:this.$route.params.issueId,issue:null,messageList:[],user_value:null,userList:JSON.parse(sessionStorage.getItem("userList")),user:JSON.parse(sessionStorage.getItem("user")),isShowAssignment:!1,isShowHandler:!1,isShowColse:!1,isShowUnsolved:!0,handler_comments:"",second_test_comments:"",statusList:[{text:"待处理",value:0},{text:"进行中",value:1},{text:"待审核",value:2},{text:"已关闭",value:3}],levelList:[{text:"学生",value:0},{text:"vip学生",value:1},{text:"老师",value:2},{text:"认证老师",value:3}],stageList:[{text:"小学",value:0},{text:"初中",value:1},{text:"高中",value:2},{text:"大学",value:3},{text:"留学",value:4},{text:"幼儿",value:5}],menuList:[{text:"单词学习",value:0},{text:"同步学习",value:1},{text:"组卷",value:2},{text:"考试分析",value:3},{text:"我",value:4}],phoneNetworkStatusList:[{text:"有网络",value:0},{text:"无网络",value:1},{text:"切换到WIFI",value:2},{text:"切换到移动",value:3}],phoneNetworkCategoryList:[{text:"WIFI",value:0},{text:"4G",value:1}],clazzList:[{text:"高",value:0},{text:"中",value:1},{text:"低",value:2}],failRateList:[{text:"偶尔",value:0},{text:"每次",value:1}],issueCategoryList:[{text:"技术",value:0},{text:"内容",value:1},{text:"界面",value:2},{text:"其他",value:3}],show:!1,index:0,images:[],videos:[],isHandler:!1,checked:!1}},methods:{getIssue:function(){var t=this;this.isShowAssignment=!1,this.isShowHandler=!1,this.isShowColse=!1;var s=new URLSearchParams;s.append("issueId",this.issueId),this.showLoading(),this.axios.post("/getIssue",s).then(function(s){if(0==s.data.status){var e=s.data.data;if(null!=e&&(t.issue=e.issue,t.check(e.issue),t.messageList=e.messageList,t.images=[],t.videos=[],null!=e.issue.mediaUrls&&""!=e.issue.mediaUrls))for(var a=e.issue.mediaUrls.split(","),n=0;n<a.length;n++)-1!=a[n].indexOf(".jpg")||-1!=a[n].indexOf(".jpeg")||-1!=a[n].indexOf(".png")||-1!=a[n].indexOf(".heic")||-1!=a[n].indexOf(".JPG")||-1!=a[n].indexOf(".JPEG")||-1!=a[n].indexOf(".PNG")||-1!=a[n].indexOf(".HEIC")?t.images.push("http://106.14.191.77:9003/index/media/"+a[n].trim()):t.videos.push("http://106.14.191.77:9003/index/media/"+a[n].trim())}t.hideLoading()}).catch(function(t){console.error(t)})},onChange:function(t){this.index=t},clickImageItem:function(){this.show=!0},showLoading:function(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,mask:!0})},hideLoading:function(){this.$toast.clear()},assignmentIssue:function(){var t=this;if(null!=this.user_value){var s=new URLSearchParams;s.append("issueId",this.issue.id),s.append("userId",this.user_value),this.showLoading(),this.axios.post("/assignmentIssue",s).then(function(s){if(0==s.data.status)return t.$toast.fail("分配成功"),t.hideLoading(),void t.getIssue()}).catch(function(t){console.error(t)})}else this.$toast.fail("请选择处理者")},processingOpinions:function(){var t=this,s=new URLSearchParams;s.append("issueId",this.issue.id),s.append("userId",this.user.userId),s.append("message",this.handler_comments),s.append("status","2"),this.handler_comments="",this.showLoading(),this.axios.post("/createMessage",s).then(function(s){if(0==s.data.status)return t.$toast.fail("处理成功"),t.hideLoading(),void t.getIssue()}).catch(function(t){console.error(t)})},closeIssue:function(){var t=this,s=new URLSearchParams;s.append("issueId",this.issue.id),s.append("userId",this.user.userId),s.append("message",this.second_test_comments),s.append("status","3"),this.second_test_comments="",this.showLoading(),this.axios.post("/createMessage",s).then(function(s){if(0==s.data.status)return t.$toast.fail("处理成功"),t.hideLoading(),void t.getIssue()}).catch(function(t){console.error(t)})},unsolvedIssue:function(){var t=this,s=new URLSearchParams;s.append("issueId",this.issue.id),s.append("userId",this.user.userId),s.append("message",this.second_test_comments),s.append("status","1"),this.second_test_comments="",this.showLoading(),this.axios.post("/createMessage",s).then(function(s){if(0==s.data.status)return t.$toast.fail("提交成功"),t.hideLoading(),void t.getIssue()}).catch(function(t){console.error(t)})},isTemporarilyUnableToProcess:function(t){var s=this,e=new URLSearchParams;e.append("issueId",this.issue.id),e.append("isTemporarilyUnableToProcess",t),this.showLoading(),this.axios.post("/isTemporarilyUnableToProcess",e).then(function(t){if(0==t.data.status)return s.$toast.fail("修改成功"),s.hideLoading(),void s.getIssue()}).catch(function(t){console.error(t)})},check:function(t){this.floatingButtonHide=!0,0!=t.status&&"100"==this.user.usertypeid&&(this.floatingButtonHide=!1),2==t.category?0==t.status&&(this.isShowColse=!0,this.isShowUnsolved=!1,"100"==this.user.usertypeid&&(this.isShowAssignment=!0)):0==t.status&&"100"==this.user.usertypeid&&(this.isShowAssignment=!0),1==t.status&&this.user.userId==t.handlerId&&(this.isShowHandler=!0),2==t.status&&this.user.userId==t.creator&&(this.isShowColse=!0,this.isShowUnsolved=!0),this.user.userId==t.handlerId?(this.isHandler=!0,this.checked=t.isTemporarilyUnableToProcess):(this.isHandler=!1,this.checked=t.isTemporarilyUnableToProcess)},clickFloatingButton:function(){this.user_value=null,this.isShowAssignment=!0}},filters:{formatDate:function(t){return e("PJh5")(t).format("MM/DD HH:mm")},getUserName:function(t,s){for(var e=0;e<s.length;e++)if(s[e].value==t)return s[e].text},checkNull:function(t){return null==t||void 0==t||""==t?"":t}},created:function(){this.getIssue()}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"home"}},[e("Header"),t._v(" "),t.issue?e("div",{staticClass:"home"},[e("vue-fab",{attrs:{"icon-type":"iconfont",icon:"icon-fenpeijiaose",fabItemAnimate:"default",scrollAutoHide:!1,hidden:t.floatingButtonHide,mainBtnColor:"#16C2C2"},on:{clickMainBtn:t.clickFloatingButton}}),t._v(" "),e("van-row",[e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"6"}},[t._v("创建者")]),t._v(" "),e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"8"}},[t._v("时间")]),t._v(" "),e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"4"}},[t._v("编号")]),t._v(" "),e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"6"}},[t._v("状态")])],1),t._v(" "),e("van-row",[e("van-col",{style:{color:"red"},attrs:{span:"6"}},[t._v(t._s(t._f("getUserName")(t.issue.creator,t.userList)))]),t._v(" "),e("van-col",{attrs:{span:"8"}},[t._v(t._s(t._f("formatDate")(t.issue.issueDate)))]),t._v(" "),e("van-col",{attrs:{span:"4"}},[t._v(t._s(t.issue.id))]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.statusList[t.issue.status].text))])],1)],1),t._v(" "),t.isHandler?e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold","line-height":"2.5"},attrs:{span:"6"}},[t._v("暂时无法处理")]),t._v(" "),e("van-col",{attrs:{span:"8"}},[e("van-switch",{attrs:{value:t.checked},on:{input:t.isTemporarilyUnableToProcess}})],1)],1):t._e(),t._v(" "),e("van-row",[e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"24"}},[t._v("手机信息")])],1),t._v(" "),e("van-row",{staticClass:"border_class"},[e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("品牌:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.issue.phoneBrand))]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v("手机型号:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.issue.phoneModel))])],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("系统:")]),t._v(" "),e("van-col",{style:{color:"red"},attrs:{span:"6"}},[t._v(t._s(t.issue.system))]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v("系统版本:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.issue.phoneIos))])],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("网络分类:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.phoneNetworkCategoryList[t.issue.phoneNetworkCategory-1].text))]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v("网络状态:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.phoneNetworkStatusList[t.issue.phoneNetworkStatus].text))])],1)],1)],1),t._v(" "),e("van-row",[e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"24"}},[t._v("米奇信息")])],1),t._v(" "),e("van-row",{staticClass:"border_class"},[e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("米奇账号:")]),t._v(" "),e("van-col",{attrs:{span:"8"}},[t._v(t._s(t.issue.mobile))]),t._v(" "),e("van-col",{attrs:{span:"4"}},[t._v("身份:")]),t._v(" "),e("van-col",{style:{color:"red"},attrs:{span:"6"}},[t._v(t._s(t.levelList[t.issue.level].text))])],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("学段:")]),t._v(" "),e("van-col",{style:{color:"red"},attrs:{span:"6"}},[t._v(t._s(t.stageList[t.issue.stage-1].text))]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v("菜单:")]),t._v(" "),e("van-col",{style:{color:"red"},attrs:{span:"6"}},[t._v(t._s(t.menuList[t.issue.menu-1].text))])],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("严重度:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.clazzList[t.issue.clazz].text))]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v("出错率:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.failRateList[t.issue.failRate-1].text))])],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("版本号:")]),t._v(" "),e("van-col",{attrs:{span:"6"}},[t._v(t._s(t.issue.version))])],1)],1)],1),t._v(" "),e("van-row",[e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"24"}},[t._v("问题信息")])],1),t._v(" "),e("van-row",{staticClass:"border_class"},[e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("问题分类:")]),t._v(" "),e("van-col",{style:{color:"red"},attrs:{span:"6"}},[t._v(t._s(t.issueCategoryList[t.issue.category-1].text))])],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"6"}},[t._v("问题描述:")]),t._v(" "),e("van-col",{style:{color:"red"},attrs:{span:"18"}},[t._v(t._s(t.issue.testComments))])],1)],1)],1),t._v(" "),t.images.length>0?e("van-row",[e("van-row",[e("van-col",{attrs:{span:"24"}},[t._v("图片")])],1),t._v(" "),e("van-row",{staticStyle:{padding:"0"}},[e("van-image-preview",{attrs:{images:t.images},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}}),t._v(" "),e("van-swipe",{attrs:{autoplay:999999,loop:!1,width:150,height:200}},t._l(t.images,function(s,a){return e("van-swipe-item",{key:a,staticClass:"items",staticStyle:{width:"100px",padding:"8px"},on:{click:t.clickImageItem}},[e("van-image",{staticClass:"detailImage",attrs:{src:s,fit:"fill"},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1)}),1)],1)],1):t._e(),t._v(" "),t.videos.length>0?e("van-row",[e("van-row",[e("van-col",{attrs:{span:"24"}},[t._v("视频")])],1),t._v(" "),e("van-row",{staticStyle:{padding:"0"}},[e("van-swipe",{attrs:{autoplay:999999,loop:!1,width:150,height:200,type:"video/mp4"}},t._l(t.videos,function(t,s){return e("van-swipe-item",{key:s,staticClass:"items",staticStyle:{width:"200px",padding:"8px"}},[e("video",{staticClass:"detailImage",attrs:{controls:"controls"}},[e("source",{attrs:{src:t,type:"video/mp4"}})])])}),1)],1)],1):t._e(),t._v(" "),t.messageList.length>0?e("van-row",[e("van-row",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v("消息")]),t._v(" "),e("van-row",{staticClass:"border_class"},t._l(t.messageList,function(s,a){return e("van-row",{key:a},[e("van-col",{attrs:{span:"4"}},[t._v("时间:")]),t._v(" "),e("van-col",{attrs:{span:"8"}},[t._v(t._s(t._f("formatDate")(s.messageDate)))]),t._v(" "),e("van-col",{attrs:{span:"4"}},[t._v("名字:")]),t._v(" "),e("van-col",{attrs:{span:"8"}},[t._v(t._s(t._f("getUserName")(s.userId,t.userList)))]),t._v(" "),2==s.issueStatus?e("van-col",{attrs:{span:"6"}},[t._v("处理意见:")]):e("van-col",{attrs:{span:"10"}},[t._v("二次测试回复:")]),t._v(" "),e("van-col",{attrs:{span:"14"}},[t._v(t._s(t._f("checkNull")(s.message)))])],1)}),1)],1):t._e(),t._v(" "),t.isShowAssignment?e("van-row",{staticClass:"assignmentButton"},[e("van-row",{staticStyle:{padding:"0"}},[e("van-col",{staticStyle:{height:"50px","text-align":"center","line-height":"50px","font-weight":"bold"},attrs:{span:"6"}},[t._v("任务分配")]),t._v(" "),e("van-col",{attrs:{span:"18"}},[e("van-dropdown-menu",{staticStyle:{"margin-left":"auto",right:"10px"},attrs:{direction:"up"}},[e("van-dropdown-item",{attrs:{options:t.userList},model:{value:t.user_value,callback:function(s){t.user_value=s},expression:"user_value"}})],1)],1)],1),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"10",offset:"6"}},[e("van-button",{attrs:{size:"large",round:"",type:"info"},on:{click:t.assignmentIssue}},[t._v("分配")])],1)],1)],1):t._e(),t._v(" "),t.isShowHandler?e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"24"}},[t._v("处理意见")]),t._v(" "),e("van-col",{staticClass:"border_class",attrs:{span:"24"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.handler_comments,expression:"handler_comments"}],staticStyle:{width:"100%",height:"50px",border:"0"},domProps:{value:t.handler_comments},on:{input:function(s){s.target.composing||(t.handler_comments=s.target.value)}}})]),t._v(" "),e("van-col",{attrs:{span:"10",offset:"6"}},[e("van-button",{attrs:{size:"large",round:"",type:"info"},on:{click:t.processingOpinions}},[t._v("提交")])],1)],1):t._e(),t._v(" "),t.isShowColse?e("van-row",[e("van-col",{staticStyle:{"font-weight":"bold"},attrs:{span:"24"}},[t._v("二次测试反馈")]),t._v(" "),e("van-col",{staticClass:"border_class",attrs:{span:"24"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.second_test_comments,expression:"second_test_comments"}],staticStyle:{width:"100%",height:"50px",border:"0"},domProps:{value:t.second_test_comments},on:{input:function(s){s.target.composing||(t.second_test_comments=s.target.value)}}})]),t._v(" "),t.isShowUnsolved?e("van-col",{attrs:{span:"8",offset:"2"}},[e("van-button",{attrs:{size:"large",round:"",type:"info"},on:{click:t.closeIssue}},[t._v("关闭问题")])],1):e("van-col",{attrs:{span:"20",offset:"2"}},[e("van-button",{attrs:{size:"large",round:"",type:"info"},on:{click:t.closeIssue}},[t._v("关闭问题")])],1),t._v(" "),t.isShowUnsolved?e("van-col",{attrs:{span:"8",offset:"2"}},[e("van-button",{attrs:{size:"large",round:"",type:"info"},on:{click:t.unsolvedIssue}},[t._v("未解决")])],1):t._e()],1):t._e()],1):t._e()],1)},staticRenderFns:[]};var i=e("VU/8")(a,n,!1,function(t){e("i4S5")},null,null);s.default=i.exports}});
//# sourceMappingURL=3.6bd22b18c37ae53d14bc.js.map