webpackJsonp([4],{"56eU":function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i("uW9E"),a=(i("7+uW"),{components:{Header:e.a},data:function(){return{activeNames:["level1"],isNeedDialog:!0,finished:!1,refreshing:!1,wordId:this.$route.params.wordId,wordScriptInfo:null,audio:null,coreWord:this.$route.params.wordName,selectWordList:[],levelList:["level1","level2","level3"]}},methods:{showLoading:function(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,mask:!0})},hideLoading:function(){this.$toast.clear()},getWordScriptInfo:function(){var t=this;this.showLoading();var n=this;this.axios.get("/scriptWordInfo/"+this.wordId).then(function(i){if(0==i.data.status){var e=i.data.data;null!=e&&(n.wordScriptInfo=e,n.wordScriptInfo.scriptInfoList.length<=0&&(n.finished=!0))}n.refreshing=!1,t.hideLoading()}).catch(function(t){console.error(t)})},playAudio:function(t,n){var i=this;switch(t.isPlaying){case"loading":return;case"true":return void(this.audio&&(this.audio.pause(),t.isPlaying="false",i.$set(i.wordScriptInfo.scriptInfoList,n,t)))}i.audio=new Audio,i.audio.src=t.mp3,t.isPlaying="loading",i.$set(i.wordScriptInfo.scriptInfoList,n,t),i.audio.onended=function(){t.isPlaying="false",i.$set(i.wordScriptInfo.scriptInfoList,n,t)};var e=i.audio.play();e&&e.then(function(){t.isPlaying="true",i.$set(i.wordScriptInfo.scriptInfoList,n,t)}).catch(function(e){i.$notify({type:"danger",message:"音频播放失败"}),t.isPlaying="false",i.$set(i.wordScriptInfo.scriptInfoList,n,t)})},updateListenStatus:function(t,n,i){var e=this;this.audio&&(this.audio.pause(),t.isPlaying="false",this.$set(this.wordScriptInfo.scriptInfoList,i,t));var a=JSON.parse(window.sessionStorage.getItem("user")),s=new FormData;if(s.append("scriptId",t.scriptid),s.append("scriptStatus",n),s.append("realName",a.realName),s.append("userId ",a.userId),s.append("wordId ",this.wordId),s.append("wordName ",this.coreWord),this.isNeedDialog){var o="";switch(n){case 0:o="正确";break;case 1:o="核心单词没有在音频中";break;case 2:o="歌曲";break;case 3:o="例句重复";break;case 4:o="例句翻译有误";break;case 5:o="例句切割不完整";break;case 6:o="不要";break;default:return}this.$dialog.confirm({title:o,message:""}).then(function(){e.showLoading(),e.axios.post("/updateListenStatus",s).then(function(t){0==t.data.status&&(null!=t.data.data&&(e.$delete(e.wordScriptInfo.scriptInfoList,i),e.wordScriptInfo.scriptInfoList.length<=0&&e.onRefresh()));e.hideLoading()}).catch(function(t){e.hideLoading(),console.error(t)})}).catch(function(){})}else this.showLoading(),this.axios.post("/updateListenStatus",s).then(function(t){0==t.data.status&&(null!=t.data.data&&(e.$delete(e.wordScriptInfo.scriptInfoList,i),e.wordScriptInfo.scriptInfoList.length<=0&&e.onRefresh()));e.hideLoading()}).catch(function(t){e.hideLoading(),console.error(t)})},onBack:function(){history.back()},onRefresh:function(){this.finished=!1,this.getWordScriptInfo()}},created:function(){this.onRefresh()}}),s={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("Header",{attrs:{title:"核心单词:"+t.coreWord}}),t._v(" "),i("van-cell",{attrs:{center:"",title:"是否需要弹窗："},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-switch",{attrs:{size:"24"},model:{value:t.isNeedDialog,callback:function(n){t.isNeedDialog=n},expression:"isNeedDialog"}})]},proxy:!0}])}),t._v(" "),null!=t.wordScriptInfo?i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(n){t.refreshing=n},expression:"refreshing"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"}},t._l(t.wordScriptInfo.scriptInfoList,function(n,e){return i("van-cell",{key:n.scriptid},[i("div",[i("van-row",{style:{background:"gray"}},[i("van-col",{attrs:{span:"4"}},[t._v("英文：")]),t._v(" "),i("van-col",{attrs:{span:"16"}},[t._v(t._s(n.script_eng))]),t._v(" "),i("van-col",{attrs:{span:"4"}},["loading"==n.isPlaying?i("van-loading",{attrs:{type:"spinner",color:"#1989fa",size:"50"}}):i("van-icon",{attrs:{name:"true"==n.isPlaying?"stop-circle-o":"play-circle-o",size:"50"},on:{click:function(i){return t.playAudio(n,e)}}})],1)],1),t._v(" "),i("van-row",[i("van-col",{attrs:{span:"6"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,0,e)}}},[t._v("正确")])],1),t._v(" "),i("van-col",{attrs:{span:"12"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,1,e)}}},[t._v("核心单词没有在音频中")])],1),t._v(" "),i("van-col",{attrs:{span:"6"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,2,e)}}},[t._v("歌曲")])],1)],1),t._v(" "),i("van-row",[i("van-col",{attrs:{span:"12"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,3,e)}}},[t._v("例句重复")])],1),t._v(" "),i("van-col",{attrs:{span:"12"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,4,e)}}},[t._v("例句翻译有误")])],1)],1),t._v(" "),i("van-row",[i("van-col",{attrs:{span:"12"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,5,e)}}},[t._v("例句切割不完整")])],1),t._v(" "),i("van-col",{attrs:{span:"12"}},[i("van-button",{on:{click:function(i){return t.updateListenStatus(n,6,e)}}},[t._v("不要")])],1)],1)],1)])}),1)],1):i("van-empty",{attrs:{image:"error",description:"数据异常scriptId:"+t.wordId}})],1)},staticRenderFns:[]};var o=i("VU/8")(a,s,!1,function(t){i("vM1Z")},null,null);n.default=o.exports},vM1Z:function(t,n){}});
//# sourceMappingURL=4.4b1b85ce838fdf81cb20.js.map